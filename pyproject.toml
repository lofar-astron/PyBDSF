[build-system]
requires = [
    "setuptools<65.6",
    "wheel",
    "oldest-supported-numpy"
]

[tool.cibuildwheel]
before-all = "cibuildwheel/before_all.sh"
before-build = "cibuildwheel/before_build.sh"
build = "cp3{6,7,8,9,10}-*_x86_64"
build-verbosity = 1
environment = """ \
    BOOST_VERSION="1.76.0" \
    BOOST_BUILD_DIR="/tmp/boost-build" \
    BOOST_INSTALL_DIR="${HOME}/boost" \
    CFLAGS="-I${BOOST_INSTALL_DIR}/include -L${BOOST_INSTALL_DIR}/lib" \
    LD_LIBRARY_PATH="${BOOST_INSTALL_DIR}/lib" \
"""
# skip = ["cp311-*", "pp*"]

[tool.cibuildwheel.macos]
# before-all = "cibuildwheel/download_boost.sh"
# before-build = """ \
#     pip install oldest-supported-numpy &&  \
#     cibuildwheel/build_boost.sh \
# """
# build = "cp38-macosx_x86_64"
# build-verbosity = 1
# environment = """ \
#     BOOST_VERSION="1.76.0" \
#     BOOST_BUILD_DIR="/tmp/boost-build" \
#     BOOST_INSTALL_DIR="${HOME}/boost" \
#     CFLAGS="-I${BOOST_INSTALL_DIR}/include -L${BOOST_INSTALL_DIR}/lib" \
#     LD_LIBRARY_PATH="${BOOST_INSTALL_DIR}/lib" \
# """
repair-wheel-command = """\
    DYLD_LIBRARY_PATH=${BOOST_INSTALL_DIR}/lib delocate-wheel \
    --require-archs {delocate_archs} -w {dest_dir} -v {wheel}\
"""
skip = ["cp3{678}-*"]

[tool.cibuildwheel.linux]
# before-all = "cibuildwheel/download_boost.sh"
# before-build = """ \
#     pip install oldest-supported-numpy &&  \
#     cibuildwheel/build_boost.sh \
# """
# build = "cp*-manylinux_x86_64"
# build-verbosity = 1
# environment = """ \
#     BOOST_VERSION="1.76.0" \
#     BOOST_BUILD_DIR="/tmp/boost-build" \
#     BOOST_INSTALL_DIR="${HOME}/boost" \
#     CFLAGS="-I${BOOST_INSTALL_DIR}/include -L${BOOST_INSTALL_DIR}/lib" \
#     LD_LIBRARY_PATH="${BOOST_INSTALL_DIR}/lib" \
# """
skip = ["*-musllinux_*"]
